<StackLayout>

    <ActivityIndicator [busy]="true" *ngIf="!userdata && !group"></ActivityIndicator>

    <StackLayout *ngIf="userdata || group">

        <StackLayout class="mb-5 text-center" *ngIf="edit">
            <StackLayout *ngIf="saving">
                <ActivityIndicator [busy]="true"></ActivityIndicator>
                <Label text="Wird gespeichert..."></Label>
            </StackLayout>

            <StackLayout *ngIf="!saving">
                <Label>
                    <FormattedString>
                        <Span text="check" class="fas"></Span>
                        <Span text="Erfolgreich gespeichert!"></Span>
                    </FormattedString>
                </Label>
            </StackLayout>
        </StackLayout>
        <GridLayout class="schedule" [class.editMode]="edit" [class.small]="small" [rows]="getGridLayoutRows()" [columns]="getGridLayoutColumns()">
            <Label row="0" col="0" [text]='small ? "" : group && group.name ? group.name : ""'></Label>
            <Label *ngFor="let day of days; index as index" row="0" [col]="index + 1" [text]="day.nameShort"></Label>

            <Label [row]="rowIndex + 1" *ngFor="let row of getRows(); index as rowIndex" col="0" [text]='small ? row[0].nameShort : row[0].name'></Label>
            <Label text="" *ngFor="let period of mobilePeriodCache" [class]="period.class" [row]="period.row" [col]="period.col" (tap)="selectMobile(period)" [class.selected]="period.selected"></Label>


        </GridLayout>
    </StackLayout>

    <StackLayout *ngIf="mobilePeriodSelected">
        <Label *ngIf="(!usersToShow || usersToShow.length === 0) && !small" class="alert alert-info text-center" text="Keine Personen haben dort eine Freistunde!"></Label>
        <StackLayout *ngIf="usersToShow && usersToShow.length > 0">
            <Button class="btn btn-outline-primary" (tap)="toggleSchedules()" [text]='showSchedules ? "Stundenpl채ne verbergen" : "Stundenpl채ne anzeigen"'></Button>

            <Label class="alert alert-success mt-3" textWrap="true">
                <FormattedString>
                    <Span text="Information"></Span>
                    <Span text="&#xf071; &#xf236;" class="fas"></Span>
                    <Span text=" bedeutet, dass diese Person "></Span>
                    <Span text="vor"></Span>
                    <Span text=" der ausgew채hlten Freistunde noch keinen Unterricht hat, "></Span>
                    <Span text="&#xf071; &#xf2e7;" class="fas"></Span>
                    <Span text=" bedeutet, dass diese Person "></Span>
                    <Span text="nach"></Span>
                    <Span text=" der ausgew채hlten Freistunde keinen Unterricht mehr hat."></Span>
                </FormattedString>
            </Label>

            <GridLayout rows="auto, auto" columns="auto, *" *ngFor="let user of usersToShow">
                <Label row="0" col="0" class="fas" *ngIf="user.noPreviousPeriods || user.noFollowingPeriods" [text]="'&#xf071; ' + (user.noPreviousPeriods ? '&#xf236;' : '&#xf2e7;')"></Label>
                <Label [text]="user.username" row="0" col="1"></Label>
            </GridLayout>
        </StackLayout>
    </StackLayout>
</StackLayout>